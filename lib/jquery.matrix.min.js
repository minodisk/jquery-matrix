(function(){function t(i,s,h){var n;if(!(this instanceof t)){if(T(i))return new t(i[0],i[1],i[2]);throw new TypeError("TypeError: Type Coercion failed: cannot convert "+i+" to Vector")}i instanceof t&&(n=i,i=n.x,s=n.y,h=n.z),this.x=null!=i?i:0,this.y=null!=s?s:0,this.z=null!=h?h:0}function i(t,i,s){this.heading=null!=t?t:0,this.pitch=null!=i?i:0,this.bank=null!=s?s:0}function s(t,i,s,h){this.w=null!=t?t:1,this.x=null!=i?i:0,this.y=null!=s?s:0,this.z=null!=h?h:0}function h(t,i,s,h,n,e,r,o,m){this.m11=t,this.m12=i,this.m13=s,this.m21=h,this.m22=n,this.m23=e,this.m31=r,this.m32=o,this.m33=m}function n(t,i,s,h,e,r,o,m,a,u,c,y){if(t instanceof n){var p=t;t=p.m11,i=p.m12,s=p.m13,h=p.m21,e=p.m22,r=p.m23,o=p.m31,m=p.m32,a=p.m33,u=p.tx,c=p.ty,y=p.tz}this.m11=null!=t?t:1,this.m12=null!=i?i:0,this.m13=null!=s?s:0,this.m21=null!=h?h:0,this.m22=null!=e?e:1,this.m23=null!=r?r:0,this.m31=null!=o?o:0,this.m32=null!=m?m:0,this.m33=null!=a?a:1,this.tx=null!=u?u:0,this.ty=null!=c?c:0,this.tz=null!=y?y:0}function e(t){if("string"==typeof t){var i;return 0===t.indexOf("matrix3d")?i=t.substring(9,t.length-1).split(","):0===t.indexOf("matrix")&&(i=t.substring(7,t.length-1).split(","),i=[i[0],i[1],0,i[2],i[3],0,0,0,1,i[4],i[5],0]),e.__super__.constructor.apply(this,i),void 0}e.__super__.constructor.apply(this,arguments)}var r=this.Math,o=r.PI,m=2*o,a=o/2,u=1/a,c=r.sin,y=r.cos,p=(r.tan,r.asin),f=r.acos,l=(r.atan,r.atan2),z=r.sqrt,x=r.abs,d=r.floor,b=(r.ceil,function(t){return t+=o,t-=d(t*u)*m,t-=o}),w=function(t){return-1>=t?o:t>=1?0:f(t)},v=(this.parseFloat,1e-6),g=Object.prototype.toString,T=Array.isArray||function(t){return"[object Array]"===g.call(t)};t.kZeroVector=new t(0,0,0),t.kRightVector=new t(1,0,0),t.kUpVector=new t(0,1,0),t.kForwardVector=new t(0,0,1),t.crossProduct=function(t,i){return t.crossProduct(i)},t.dotProduct=function(t,i){return t.dotProduct(i)},t.distance=function(t,i){return t.distance(i)},t.distanceSquared=function(t,i){return t.distanceSquared(i)},t.isUnit=function(i){return x(t.dotProduct(i,i)-1)>.01},t.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.z=t.z},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},t.prototype.notEquals=function(t){return this.x!==t.x||this.y!==t.y||this.z!==t.z},t.prototype.zero=function(){this.x=this.y=this.z=0},t.prototype.minus=function(){return t(-this.x,-this.y,-this.z)},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y,this.z+i.z)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y,this.z-i.z)},t.prototype.multiply=function(i){return new t(this.x*i,this.y*i,this.z*i)},t.prototype.divide=function(i){var s=1/i;return new t(this.x*s,this.y*s,this.z*s)},t.prototype.set=function(i,s,h){if(i instanceof t){var n=i;i=n.x,s=n.y,h=n.z}return this.x=i,this.y=s,this.z=h,this},t.prototype.normalize=function(){var t,i=this.x*this.x+this.y*this.y+this.z*this.z;i>0&&(t=1/z(i),this.x*=t,this.y*=t,this.z*=t)},t.prototype.magnitude=function(){return z(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.prototype.crossProduct=function(i){return t(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.distance=function(t){var i=this.x-t.x,s=this.y-t.y,h=this.z-t.z;return z(i*i+s*s+h*h)},t.prototype.distanceSquared=function(t){var i=this.x-t.x,s=this.y-t.y,h=this.z-t.z;return i*i+s*s+h*h},i.kEulerAnglesIdentity=new i(0,0,0),i.prototype.identity=function(){this.heading=this.pitch=this.bank=0},i.prototype.set=function(t,s,h){if(t instanceof i){var n=t;t=n.heading,s=n.pitch,h=n.bank}return this.heading=t,this.pitch=s,this.bank=h,this},i.prototype.canonize=function(){this.pitch=b(this.pitch),-a>this.pitch?(this.pitch=-o-this.pitch,this.heading+=o,this.bank+=o):this.pitch>a&&(this.pitch=o-this.pitch,this.heading+=o,this.bank+=o),x(this.pitch)>a-1e-4?(this.heading+=this.bank,this.bank=0):this.bank=b(this.bank),this.heading=b(this.heading)},i.prototype.fromObjectToInertialQuaternion=function(t){var i=-2*(t.y*t.z-t.w*t.x);x(i)>.9999?(this.pitch=a*i,this.heading=l(-t.x*t.z+t.w*t.y,.5-t.y*t.y-t.z*t.z),this.bank=0):(this.pitch=p(i),this.heading=l(t.x*t.z+t.w*t.y,.5-t.x*t.x-t.y*t.y),this.bank=l(t.x*t.y+t.w*t.z,.5-t.x*t.x-t.z*t.z))},i.prototype.fromInertialToObjectQuaternion=function(t){var i=-2*(t.y*t.z+t.w*t.x);x(i)>.9999?(this.pitch=a*i,this.heading=l(-t.x*t.z-t.w*t.y,.5-t.y*t.y-t.z*t.z),this.bank=0):(this.pitch=p(i),this.heading=l(t.x*t.z-t.w*t.y,.5-t.x*t.x-t.y*t.y),this.bank=l(t.x*t.y-t.w*t.z,.5-t.x*t.x-t.z*t.z))},i.prototype.fromObjectToWorldMatrix=function(t){var i=-t.m32;x(i)>9.99999?(this.pitch=a*i,this.heading=l(-t.m23,t.m11),this.bank=0):(this.heading=l(t.m31,t.m33),this.pitch=p(i),this.bank=l(t.m12,t.m22))},i.prototype.fromWorldToObjectMatrix=function(t){var i=-t.m23;x(i)>9.99999?(this.pitch=a*i,this.heading=l(-t.m31,t.m11),this.bank=0):(this.heading=l(t.m13,t.m33),this.pitch=p(i),this.bank=l(t.m21,t.m22))},i.prototype.fromRotationMatrix=function(t){var i=-t.m32;x(i)>9.99999?(this.pitch=a*i,this.heading=l(-t.m13,t.m11),this.bank=0):(this.heading=l(t.m31,t.m33),this.pitch=p(i),this.bank=l(t.m12,t.m22))},i.prototype.add=function(t){return new i(this.heading+t.heading,this.pitch+t.pitch,this.bank+t.bank)},i.prototype.subtract=function(t){return new i(this.heading-t.heading,this.pitch-t.pitch,this.bank-t.bank)},i.prototype.multiply=function(t){return new i(this.heading*t,this.pitch*t,this.bank*t)},i.prototype.divide=function(t){return new i(this.heading/t,this.pitch/t,this.bank/t)},s.prototype.identity=function(){this.w=1,this.x=this.y=this.z=0},s.dotProduct=function(t,i){return t.dotProduct(i)},s.crossProduct=function(t,i){return t.crossProduct(i)},s.conjugate=function(t){return t.conjugate()},s.pow=function(t,i){return t.pow(i)},s.kQuaternionIdentity=new s(1,0,0,0),s.prototype.setToRotateAboutX=function(t){var i=.5*t;this.w=y(i),this.x=c(i),this.y=0,this.z=0},s.prototype.setToRotateAboutY=function(t){var i=.5*t;this.w=y(i),this.x=0,this.y=c(i),this.z=0},s.prototype.setToRotateAboutZ=function(t){var i=.5*t;this.w=y(i),this.x=0,this.y=0,this.z=c(i)},s.prototype.setToRotateAboutAxis=function(t,i){if(!(.01>x(t.magnitude()-1)))throw new TypeError("The axis of rotation must be normalized");var s=.5*i,h=c(s);this.w=y(s),this.x=t.x*h,this.y=t.y*h,this.z=t.z*h},s.prototype.setToRotateObjectToInertial=function(t){var i=.5*t.heading,s=.5*t.pitch,h=.5*t.bank,n=c(i),e=c(s),r=c(h),o=y(i),m=y(s),a=y(h);this.w=o*m*a+n*e*r,this.x=o*e*a+n*m*r,this.y=-o*e*r+n*m*a,this.z=-n*e*a+o*m*r},s.prototype.setToRotateInertialToObject=function(t){var i=.5*t.heading,s=.5*t.pitch,h=.5*t.bank,n=c(i),e=c(s),r=c(h),o=y(i),m=y(s),a=y(h);this.w=o*m*a+n*e*r,this.x=-o*e*a-n*m*r,this.y=o*e*r-n*a*m,this.z=n*e*a-o*m*r},s.prototype.normalize=function(){var t=z(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);if(t>0){var i=1/t;this.w*=i,this.x*=i,this.y*=i,this.z*=i}else this.identity()},s.prototype.getRotationAngle=function(){var t=w(this.w);return 2*t},s.prototype.getRotationAxis=function(){var i=1-this.w*this.w;if(0>=i)return new t(1,0,0);var s=1/z(i);return new t(this.x*s,this.y*s,this.z*s)},s.prototype.dotProduct=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.crossProduct=function(t){var i=new s;return i.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,i.x=this.w*t.x+this.x*t.w+this.z*t.y-this.y*t.z,i.y=this.w*t.y+this.y*t.w+this.x*t.z-this.z*t.x,i.z=this.w*t.z+this.z*t.w+this.y*t.x-this.x*t.y,i},s.slerp=function(t,i,h){if(0>=h)return t;if(h>=1)return i;var n=s.prototype.dotProduct(t,i),e=i.w,r=i.x,o=i.y,m=i.z;if(0>n&&(e=-e,r=-r,o=-o,m=-m,n=-n),!(1.1>n))throw new TypeError("We should have two unit quaternions, so dot should be <= 1.0");var a,u;if(n>.9999)a=1-h,u=h;else{var y=z(1-n*n),p=l(y,n),f=1/y;a=c((1-h)*p)*f,u=c(h*p)*f}var x=new s;return x.x=a*t.x+u*r,x.y=a*t.y+u*o,x.z=a*t.z+u*m,x.w=a*t.w+u*e,x},s.prototype.conjugate=function(){var t=new s;return t.w=this.w,t.x=-this.x,t.y=-this.y,t.z=-this.z,t},s.prototype.pow=function(t){if(x(this.w)>.9999)return this;var i=f(this.w),h=i*t,n=new s;n.w=y(h);var e=c(h)/c(i);return n.x=this.x*e,n.y=this.y*e,n.z=this.z*e,n},h.prototype.identity=function(){this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1},h.prototype.setup=function(t){var i=c(t.heading),s=c(t.pitch),h=c(t.bank),n=y(t.heading),e=y(t.pitch),r=y(t.bank);this.m11=n*r+i*s*h,this.m12=-n*h+i*s*r,this.m13=i*e,this.m21=h*e,this.m22=r*e,this.m23=-s,this.m31=-i*r+n*s*h,this.m32=h*i+n*s*r,this.m33=n*e},h.prototype.fromInertialToObjectQuaternion=function(t){this.m11=1-2*(t.y*t.y+t.z*t.z),this.m12=2*(t.x*t.y+t.w*t.z),this.m13=2*(t.x*t.z-t.w*t.y),this.m21=2*(t.x*t.y-t.w*t.z),this.m22=1-2*(t.x*t.x+t.z*t.z),this.m23=2*(t.y*t.z+t.w*t.x),this.m31=2*(t.x*t.z+t.w*t.y),this.m32=2*(t.y*t.z-t.w*t.x),this.m33=1-2*(t.x*t.x+t.y*t.y)},h.prototype.fromObjectToInertialQuaternion=function(t){this.m11=1-2*(t.y*t.y+t.z*t.z),this.m12=2*(t.x*t.y-t.w*t.z),this.m13=2*(t.x*t.z+t.w*t.y),this.m21=2*(t.x*t.y+t.w*t.z),this.m22=1-2*(t.x*t.x+t.z*t.z),this.m23=2*(t.y*t.z-t.w*t.x),this.m31=2*(t.x*t.z-t.w*t.y),this.m32=2*(t.y*t.z+t.w*t.x),this.m33=1-2*(t.x*t.x+t.y*t.y)},h.prototype.inertialToObject=function(i){return new t(this.m11*i.x+this.m21*i.y+this.m31*i.z,this.m12*i.x+this.m22*i.y+this.m32*i.z,this.m13*i.x+this.m23*i.y+this.m33*i.z)},h.prototype.objectToInertial=function(i){return new t(this.m11*i.x+this.m12*i.y+this.m13*i.z,this.m21*i.x+this.m22*i.y+this.m23*i.z,this.m31*i.x+this.m32*i.y+this.m33*i.z)},n.prototype.identity=function(){this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1,this.tx=this.ty=this.tz=0},n.prototype.zeroTranslation=function(){this.tx=this.ty=this.tz=0},n.prototype.setTranslation=function(t){this.tx=t.x,this.ty=t.y,this.tz=t.z},n.prototype.setupTranslation=function(t){this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1,this.tx=t.x,this.ty=t.y,this.tz=t.z},n.prototype.setupLocalToParent=function(t,i){var s=new h;s.setup(i),this.setupLocalToParent(t,s)},n.prototype.setupLocalToParent=function(t,i){this.m11=i.m11,this.m12=i.m21,this.m13=i.m31,this.m21=i.m12,this.m22=i.m22,this.m23=i.m32,this.m31=i.m13,this.m32=i.m23,this.m33=i.m33,this.tx=t.x,this.ty=t.y,this.tz=t.z},n.prototype.setupParentToLocal=function(t,i){var s=new h;s.setup(i),this.setupParentToLocal(t,s)},n.prototype.setupParentToLocal=function(t,i){this.m11=i.m11,this.m12=i.m12,this.m13=i.m13,this.m21=i.m21,this.m22=i.m22,this.m23=i.m23,this.m31=i.m31,this.m32=i.m32,this.m33=i.m33,this.tx=-(t.x*this.m11+t.y*this.m21+t.z*this.m31),this.ty=-(t.x*this.m12+t.y*this.m22+t.z*this.m32),this.tz=-(t.x*this.m13+t.y*this.m23+t.z*this.m33)},n.prototype.setupRotateX=function(t){var i=c(t),s=y(t);this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=s,this.m23=i,this.m31=0,this.m32=-i,this.m33=s,this.tx=this.ty=this.tz=0},n.prototype.setupRotateY=function(t){var i=c(t),s=y(t);this.m11=s,this.m12=0,this.m13=-i,this.m21=0,this.m22=1,this.m23=0,this.m31=i,this.m32=0,this.m33=s,this.tx=this.ty=this.tz=0},n.prototype.setupRotateZ=function(t){var i=c(t),s=y(t);this.m11=s,this.m12=i,this.m13=0,this.m21=-i,this.m22=s,this.m23=0,this.m31=0,this.m32=0,this.m33=1,this.tx=this.ty=this.tz=0},n.prototype.setupRotate=function(t,i){assert(1>x(t*t-1));var s=c(i),h=y(i),n=1-h,e=n*t.x,r=n*t.y,o=n*t.z;this.m11=e*t.x+h,this.m12=e*t.y+t.z*s,this.m13=e*t.z-t.y*s,this.m21=r*t.x-t.z*s,this.m22=r*t.y+h,this.m23=r*t.z+t.x*s,this.m31=o*t.x+t.y*s,this.m32=o*t.y-t.x*s,this.m33=o*t.z+h,this.tx=this.ty=this.tz=0},n.prototype.fromQuaternion=function(t){var i=2*t.w,s=2*t.x,h=2*t.y,n=2*t.z;this.m11=1-h*t.y-n*t.z,this.m12=s*t.y+i*t.z,this.m13=s*t.z-i*t.x,this.m21=s*t.y-i*t.z,this.m22=1-s*t.x-n*t.z,this.m23=h*t.z+i*t.x,this.m31=s*t.z+i*t.y,this.m32=h*t.z-i*t.x,this.m33=1-s*t.x-h*t.y,this.tx=this.ty=this.tz=0},n.prototype.setupScale=function(t){this.m11=t.x,this.m12=0,this.m13=0,this.m21=0,this.m22=t.y,this.m23=0,this.m31=0,this.m32=0,this.m33=t.z,this.tx=this.ty=this.tz=0},n.prototype.setupScaleAlongAxis=function(t,i){assert(1>x(t*t-1));var s=i-1,h=s*t.x,n=s*t.y,e=s*t.z;this.m11=h*t.x+1,this.m22=n*t.y+1,this.m32=e*t.z+1,this.m12=this.m21=h*t.y,this.m13=this.m31=h*t.z,this.m23=this.m32=n*t.z,this.tx=this.ty=this.tz=0},n.prototype.setupShear=function(t,i,s){switch(t){case 1:this.m11=1,this.m12=i,this.m13=s,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1;break;case 2:this.m11=1,this.m12=0,this.m13=0,this.m21=i,this.m22=1,this.m23=s,this.m31=0,this.m32=0,this.m33=1;break;case 3:this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=i,this.m32=s,this.m33=1;break;default:assert(!1)}this.tx=this.ty=this.tz=0},n.prototype.setupProject=function(t){assert(1>x(t*t-1)),this.m11=1-t.x*t.x,this.m22=1-t.y*t.y,this.m33=1-t.z*t.z,this.m12=this.m21=-t.x*t.y,this.m13=this.m31=-t.x*t.z,this.m23=this.m32=-t.y*t.z,this.tx=this.ty=this.tz=0},n.prototype.setupReflect=function(t,i){switch(null==i&&(i=0),t){case 1:this.m11=-1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=1,this.tx=2*i,this.ty=0,this.tz=0;break;case 2:this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=-1,this.m23=0,this.m31=0,this.m32=0,this.m33=1,this.tx=0,this.ty=2*i,this.tz=0;break;case 3:this.m11=1,this.m12=0,this.m13=0,this.m21=0,this.m22=1,this.m23=0,this.m31=0,this.m32=0,this.m33=-1,this.tx=0,this.ty=0,this.tz=2*i;break;default:assert(!1)}},n.prototype.setupReflect=function(t){assert(1>x(t*t-1));var i=-2*t.x,s=-2*t.y,h=-2*t.z;this.m11=1+i*t.x,this.m22=1+s*t.y,this.m32=1+h*t.z,this.m12=this.m21=i*t.y,this.m13=this.m31=i*t.z,this.m23=this.m32=s*t.z,this.tx=this.ty=this.tz=0},n.prototype.setupReflect=function(t){this.m11=-2*t.a*t.a+1,this.m12=-2*t.b*t.a,this.m13=-2*t.c*t.a,this.m21=-2*t.a*t.b,this.m22=-2*t.b*t.b+1,this.m23=-2*t.c*t.b,this.m31=-2*t.a*t.c,this.m32=-2*t.b*t.c,this.m33=-2*t.c*t.c+1,this.tx=-2*t.a*t.d,this.ty=-2*t.b*t.d,this.tz=-2*t.c*t.d},n.prototype.determinant=function(){return this.m11*(this.m22*this.m33-this.m23*this.m32)+this.m12*(this.m23*this.m31-this.m21*this.m33)+this.m13*(this.m21*this.m32-this.m22*this.m31)},n.prototype.inverse=function(){var t=this.determinant();assert(x(t)>1e-6);var i=1/t,s=new n;return s.m11=(this.m22*this.m33-this.m23*this.m32)*i,s.m12=(this.m13*this.m32-this.m12*this.m33)*i,s.m13=(this.m12*this.m23-this.m13*this.m22)*i,s.m21=(this.m23*this.m31-this.m21*this.m33)*i,s.m22=(this.m11*this.m33-this.m13*this.m31)*i,s.m23=(this.m13*this.m21-this.m11*this.m23)*i,s.m31=(this.m21*this.m32-this.m22*this.m31)*i,s.m32=(this.m12*this.m31-this.m11*this.m32)*i,s.m33=(this.m11*this.m22-this.m12*this.m21)*i,s.tx=-(this.tx*s.m11+this.ty*s.m21+this.tz*s.m31),s.ty=-(this.tx*s.m12+this.ty*s.m22+this.tz*s.m32),s.tz=-(this.tx*s.m13+this.ty*s.m23+this.tz*s.m33),s},n.prototype.getTranslation=function(){return new t(this.tx,this.ty,this.tz)},n.prototype.getPositionFromParentToLocalMatrix=function(){return new t(-(this.tx*this.m11+this.ty*this.m12+this.tz*this.m13),-(this.tx*this.m21+this.ty*this.m22+this.tz*this.m23),-(this.tx*this.m31+this.ty*this.m32+this.tz*this.m33))},n.prototype.getPositionFromLocalToParentMatrix=function(){return new t(this.tx,this.ty,this.tz)},n.multiply=function(i,s){return new t(i.x*s.m11+i.y*s.m21+i.z*s.m31+s.tx,i.x*s.m12+i.y*s.m22+i.z*s.m32+s.ty,i.x*s.m13+i.y*s.m23+i.z*s.m33+s.tz)},n.concat=function(t,i){return new n(t).concat(i)},n.prototype.concat=function(t){var i=this.m11,s=this.m12,h=this.m13,n=this.m21,e=this.m22,r=this.m23,o=this.m31,m=this.m32,a=this.m33,u=this.tx,c=this.ty,y=this.tz;return this.m11=i*t.m11+s*t.m21+h*t.m31,this.m12=i*t.m12+s*t.m22+h*t.m32,this.m13=i*t.m13+s*t.m23+h*t.m33,this.m21=n*t.m11+e*t.m21+r*t.m31,this.m22=n*t.m12+e*t.m22+r*t.m32,this.m23=n*t.m13+e*t.m23+r*t.m33,this.m31=o*t.m11+m*t.m21+a*t.m31,this.m32=o*t.m12+m*t.m22+a*t.m32,this.m33=o*t.m13+m*t.m23+a*t.m33,this.tx=u*t.m11+c*t.m21+y*t.m31+t.tx,this.ty=u*t.m12+c*t.m22+y*t.m32+t.ty,this.tz=u*t.m13+c*t.m23+y*t.m33+t.tz,this},this.Vector3=t,this.EulerAngles=i,this.Quaternion=s,this.RotationMatrix=h,this.Matrix4x3=n;var R,O=o/180,I={}.hasOwnProperty,k=function(t,i){function s(){this.constructor=t}for(var h in i)I.call(i,h)&&(t[h]=i[h]);return s.prototype=i.prototype,t.prototype=new s,t.__super__=i.prototype,t};k(e,n),e.prototype.translate=function(i,s,h){return i=null!=i?i:0,s=null!=s?s:0,h=null!=h?h:0,R.setupTranslation(new t(i,s,h)),this.concat(R),this},e.prototype.scale=function(i,s,h){return i=null!=i?i:1,s=null!=s?s:1,h=null!=h?h:1,R.setupScale(new t(i,s,h)),this.concat(R),this},e.prototype.rotate=function(t,i,s){return t=null!=t?t*O:0,i=null!=i?i*O:0,s=null!=s?s*O:0,R.setupRotateX(t),this.concat(R),R.setupRotateY(i),this.concat(R),R.setupRotateZ(s),this.concat(R),this},e.prototype.toString=function(){var t,i,s=[this.m11,this.m12,this.m13,0,this.m21,this.m22,this.m23,0,this.m31,this.m32,this.m33,0,this.tx,this.ty,this.tz,1];for(t=0,i=s.length;i>t;t++)s[t]>-v&&v>s[t]&&(s[t]=0);return"matrix3d("+s.join(", ")+")"},R=new e;var S=$.browser.webkit?"webkit":$.browser.msie?"ms":$.browser.opera?"op":null,P=function(){var t=null==S?function(t){return t}:function(t){return"-"+S+"-"+t};return{PERSPECTIVE:t("perspective"),TRANSFORM:t("transform"),TRANSFORM_ORIGIN:t("transform-origin"),TRANSITION:t("transition")}}(),A={linear:"linear","default":"default",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},N={TRANSITION_END:"webkitTransitionEnd MozTransitionEnd mozTransitionEnd msTransitionEnd oTransitionEnd transitionEnd transitionend"};$.extend($.cssHooks,{perspective:{get:function(t){return t.style[P.PERSPECTIVE]},set:function(t,i){t.style[P.PERSPECTIVE]=i}},transform:{get:function(t){return t.style[P.TRANSFORM]},set:function(t,i){t.style[P.TRANSFORM]=i}},matrix:{get:function(t){return new e(t.style[P.TRANSFORM])},set:function(t,i){return""===i||null==i?(t.style[P.TRANSFORM]="",void 0):(t.style[P.TRANSFORM]=""+i,void 0)}},origin:{get:function(t){t.style[P.TRANSFORM_ORIGIN]},set:function(t,i){return""===i||null==i?(t.style[P.TRANSFORM_ORIGIN]="",void 0):(t.style[P.TRANSFORM_ORIGIN]=[i.x+"px",i.y+"px"].join(" "),void 0)}},transition:{get:function(t){return t.style[P.TRANSITION]},set:function(t,i){if(""===i||null==i)return t.style[P.TRANSITION]="",void 0;var s,h,n,e,r,o,m=[];for($.isArray(i)||(i=[i]),s=0,h=i.length;h>s;s++)n=i[s],e="transform"===n.prop?P.TRANSFORM:n.prop,r=n.duration,o=n.easing,"object"==typeof o&&(o=o[e]),null!=A[o]&&(o=A[o]),m[s]=[e,r+"s",o].join(" ");t.style[P.TRANSITION]=m.join(", ")}}}),$.fn.extend({animate3:function(t,i,s,h){return this.each(function(){var n,e=$(this),r=$("<div>").css({visibility:"hidden",overflow:"hidden",width:0,height:0}).appendTo("body"),o=[];$._data(this,"animate3",{$dummy:r});for(n in t)t.hasOwnProperty(n)&&o.push({prop:n,duration:i,easing:s});return 0===o.length?(setTimeout(function(){h()},0),void 0):(setTimeout(function(){r.css({transition:{prop:"-webkit-transform",duration:i,easing:s},transform:"matrix(1, 0, 0, 1, 1, 0)"}).one(N.TRANSITION_END,function(){e.css("transition",""),null!=h&&h()}),e.css({transform:to,transition:o})},0),void 0)})},stop3:function(){return this.each(function(){var t=$(this),i=new Matrix(t.css(P.TRANSFORM)),s=$._data(this,"animate3");$._data(this,"transform"),null!=s&&($._data(this,"matrix",i),s.$dummy.css("transition",""),t.css({transition:"",transform:i}),s.$dummy.remove())})},slideUp3:function(t,i){var s=this;return s.css({overflow:"hidden"}).height(s.height()).animate3({height:0},t,"linear",function(){s.css({display:"none",overflow:"",height:""}),null!=i&&i()})},slideDown3:function(t,i){var s=this,h=this.height();return s.css({height:0,display:"block",overflow:"hidden"}).animate3({height:h},t,"linear",function(){s.css({height:"",overflow:""}),null!=i&&i()})},fadeIn3:function(t,i){var s=this;return s.css({opacity:0,display:"block"}).animate3({opacity:1},t,"linear",function(){null!=i&&i()})},fadeOut3:function(t,i){var s=this;return s.animate3({opacity:0},t,"linear",function(){s.css({display:"none"}),null!=i&&i()})},animate3Deferred:function(t,i,s){var h=new Deferred;return $.fn.animate3.call(this,t,i,s,function(){h.call()}),h},slideUp3Deferred:function(t){var i=new Deferred;return $.fn.slideUp3.call(this,t,function(){i.call()}),i},slideDown3Deferred:function(t){var i=new Deferred;return $.fn.slideDown3.call(this,t,function(){i.call()}),i},fadeIn3Deferred:function(t){var i=new Deferred;return $.fn.fadeIn3.call(this,t,function(){i.call()}),i},fadeOut3Deferred:function(t){var i=new Deferred;return $.fn.fadeOut3.call(this,t,function(){i.call()}),i}}),this.CSSMatrix=e}).call(this);